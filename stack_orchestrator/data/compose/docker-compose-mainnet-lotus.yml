services:
  lotus:
    environment:
      - LOTUS_API_LISTENADDRESS=/ip4/0.0.0.0/tcp/1234/http
    image: cerc/lotus:local
    volumes:
      - parameters:/var/tmp/filecoin-proof-parameters
      - lotus-repo:/var/lib/lotus
      - lotus_shared:/root/.lotus-shared
    ports:
      - "1234"
    deploy:
      restart_policy:
        condition: on-failure
        delay: 30s
    command: ["lotus", "daemon"]

volumes:
  parameters:
  lotus-repo:
  lotus_shared:

